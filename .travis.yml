dist: trusty
language: cpp
compiler:
  - gcc
matrix:
  include:
    - env: STATIC_CHECKS=yes
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
            - llvm-toolchain-trusty-6.0
          packages:
            - clang-format-6.0
            - libstdc++6 # >= 4.9 needed for clang-format-6.0
      script: sh ./scripts/clang-format.sh

    - env: STATIC_CHECKS=no
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - mesa-common-dev
            - libfreetype6-dev
            - libfreeimage-dev
            - libglew-dev
            - libsigc++-2.0-dev
            - libvorbis-dev
      before_install:
        - git clone --depth 1 git://github.com/pioneerspacesim/pioneer-thirdparty.git pioneer-thirdparty
        - cd pioneer-thirdparty/ && autoconf && ./configure && make assimp && make sdl2 && make sdl2_image && cd ../
      script:
        - ./bootstrap && ./configure --with-thirdparty=$(pwd)/pioneer-thirdparty LIBS="-ldl -lrt -lpthread" && make
