clone_depth: 1
image: Visual Studio 2017

deploy:
  provider: GitHub
  auth_token:
    secure: hquxNjhIWTiLNeKW68bhKlv0TvLT2G8w2CGnGCr6koDBqhgUWcHmIeQZy/80mc3x
  draft: false
  prerelease: false
  on:
    appveyor_repo_tag: true

environment:
  matrix:
    - TARGET: msvc
    - TARGET: mingw

install:
    - IF "%TARGET%"=="mingw" (choco install InnoSetup)
    - C:\msys64\usr\bin\bash -l /c/projects/pioneer/CI/appveyor/%TARGET%/prepare.sh

build_script:
    - C:\msys64\usr\bin\bash -l /c/projects/pioneer/CI/appveyor/%TARGET%/build.sh