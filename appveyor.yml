clone_depth: 1
image: Visual Studio 2017

deploy:
  provider: GitHub
  auth_token:
    secure: "Ajn9CykEp1CHKvIFmqYhP617A6cvZbsgHLw4VeDXeYob1aatUCAQXrjF9gUhbo4jwi2vtGFQyuK5TPHHHjSvk9EksW6c++qADqviAGvid6EAcG6AKuV76Nhx/IkCW0nUHk4ET2Zms3S2MON+rxUzihi4uCzuOlHUfG+5XntvL5Y="
  draft: false
  prerelease: false
  on:
    appveyor_repo_tag: true

environment:
  matrix:
    - TARGET: msvc
    - TARGET: mingw

install:
    - IF "%TARGET%"=="mingw" (choco install InnoSetup)
    - C:\msys64\usr\bin\bash -l /c/projects/pioneer/CI/appveyor/%TARGET%/prepare.sh

build_script:
    - C:\msys64\usr\bin\bash -l /c/projects/pioneer/CI/appveyor/%TARGET%/build.sh